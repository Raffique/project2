import{_ as f,r as d,o as i,c as r,a as s,w as m,F as h,b as p,t as a,d as u,e as g}from"./index.edeeba66.js";const k={data(){return{articles:[],csrf_token:""}},created:function(){this.getCsrfToken(),this.cars()},mounted(){this.checklogged()},methods:{view(t){d.push({name:"car",params:{car_id:t}})},cars(){let t=this;fetch("/api/cars",{method:"GET",headers:{"X-CSRFToken":this.csrf_token}}).then(function(e){return e.json()}).then(function(e){t.articles=e.cars.slice(-3)})},search(){let t=this,e=document.getElementById("searchForm"),c=new FormData(e);fetch("/api/search",{method:"POST",body:c,headers:{"X-CSRFToken":this.csrf_token}}).then(function(l){return l.json()}).then(function(l){l.files!=null?t.articles=l.files:alert("No matches found!")}).catch(function(l){console.log(l)})},checklogged(){fetch("/api/loggedIn").then(t=>t.json()).then(t=>{t.id==null?(localStorage.setItem("logged","false"),d.push("login")):localStorage.setItem("logged","true")}).catch(t=>{console.log(t)})},getCsrfToken(){let t=this;fetch("/api/csrf-token").then(e=>e.json()).then(e=>{console.log(e),t.csrf_token=e.csrf_token})}}},y={style:{"text-align":"center"}},v=g('<div class="row mb-2"><div style="margin:25px;text-align:center;"><div class="form-group" style="display:inline-block;"><label for="make">Make</label><input name="make" placeholder="Enter Make" class="form-control explore-field"></div><div class="form-group" style="display:inline-block;"><label for="model">Model</label><input name="model" placeholder="Enter Model" class="form-control explore-field"></div><button class="btn btn-success" style="display:inline-block;">Search</button></div></div>',1),b=[v],x={class:"container-fuild"},w={class:"card",style:{width:"300px",height:"480px",margin:"20px"}},S=["src"],C={class:"card-title"},F={class:"card-body"},T={class:"card-title"},V={class:"pricetag"},E={class:"card-text addresstag"},M=s("br",null,null,-1),j=["onClick"],B=s("div",{class:"card-footer footertag"}," View more details ",-1),I=[B];function N(t,e,c,l,_,n){return i(),r(h,null,[s("div",y,[s("form",{onSubmit:e[0]||(e[0]=m((...o)=>n.search&&n.search(...o),["prevent"])),id:"searchForm",method:"POST",style:{display:"inline-block"}},b,32),s("button",{class:"btn btn-danger",style:{display:"inline-block",margin:"20px","margin-left":"40px"},onClick:e[1]||(e[1]=(...o)=>n.cars&&n.cars(...o))},"Clear")]),s("div",x,[(i(!0),r(h,null,p(_.articles,o=>(i(),r("div",{key:o,style:{display:"inline-block",margin:"10px"}},[s("div",w,[s("img",{style:{width:"300px",height:"200px"},src:`/api/uploads/${o.photo.split("/t")[0]}`,alt:"Card image"},null,8,S),s("h5",C,a(o.title),1),s("div",F,[s("h5",T,[u(a(o.year)+" "+a(o.make)+" ",1),s("div",V,"$"+a(o.price),1)]),s("span",E,a(o.model),1),M]),s("div",{onClick:D=>n.view(o.id),style:{"text-decoration-line":"none"}},I,8,j)])]))),128))])],64)}var O=f(k,[["render",N]]);export{O as default};
